<analysis>
Der KI-Ingenieur hat die Score Zentrale von Grund auf neu entwickelt und kontinuierlich verbessert. Die Arbeit umfasste die Behebung kritischer Datenintegritätsprobleme (JTL-Wawi), die Verfeinerung von Verkaufsmetriken (inkl. Versandkosten, Rohertragsmarge), die Erweiterung des Dashboards um neue KPIs (Top 5 Plattformen/Hersteller) und die umfassende Überarbeitung des Analytics-Moduls (Expand/Collapse, Info-Pages, Beileger-Tracking). Ein Schwerpunkt lag auf der Kaltakquise, die von AI-gestützter Analyse und personalisierter E-Mail-Generierung bis hin zu Autopilot-Funktionen und einem Glossar-System reicht. Die Kommunikation konzentrierte sich auf detaillierte Feature-Implementierung und Bugfixing, insbesondere bei GA4-Daten, Email-Konfiguration und UI-Layout. Der aktuelle Fokus liegt auf der Neugestaltung der Kaltakquise-Suchmechanik durch ein systematisches DACH-Crawling.
</analysis>
<product_requirements>
Die Score Zentrale ist ein Next.js-Dashboard zur Integration von Sales (JTL-Wawi), Marketing (GA4, Google Ads, Kalt-/Warmakquise) und einer Outbound-Suite.
- **Sales Dashboard**: Anzeige von JTL-Wawi KPIs (Umsatz Netto/Brutto inkl. Versand, Rohertragsmarge exkl. Versand), Multi-Select-Filter, Top 5 Plattformen/Hersteller mit dynamischer Namenszuordnung und Margin-Prozent, sortierbare Tabellen. Behebung von Dateninkonsistenzen (Angebote, Artikelnamen).
- **Kaltakquise (Cold Acquisition)**: AI-gestützte Google-Suche für Prospects, detaillierte AI-Analyse (Firmengröße, Haupttätigkeit), personalisierte SMTP-E-Mail-Outreach (ohne Körnungen, Pferd-Erwähnung, persönlicher Satz, verbesserter CTA), E-Mail-Posteingang/-ausgang (mit BCC an Leismann), Kundenhistorie, Follow-up-E-Mails. Automatisierung mit konfigurierbaren Limits und Duplikatsvermeidung. Glossar-Integration für Anwendungen, Kategorien, Materialien, Maschinentypen.
- **Warmakquise (Warm Acquisition)**: Anzeige von Kundennamen, berechneter Score für inaktive Kunden, Telefonnummer, Kontakthistorie.
- **UI/UX**: Allgemeine UI-Verbesserungen, Konvertierung von Detailansichten zu Akkordeons. Implementierung von Expand/Collapse-Funktionalität für diverse Datenquellen im Analytics-Dashboard, Info-Pages und Beileger-Tracking. Anpassung des Kaltakquise-Layouts für bessere Responsivität.
- **Deployment**: Sicherstellung der Deployment-Bereitschaft durch Entfernen von Hardcoded-URLs und Behebung von Build-Fehlern.
</product_requirements>
<key_technical_concepts>
- **Next.js & TypeScript**: Full-stack Framework.
- **MongoDB**: NoSQL-Datenbank für Kaltakquise- und App-Daten.
- **MS SQL (JTL-Wawi)**: Relationale Datenbank für Sales- und Kundendaten.
- **Nodemailer & IMAP client**: E-Mail-Versand (SMTP) und Empfang (IMAP).
- **Shadcn/UI & Tailwind CSS**: UI-Komponentenbibliothek und CSS-Framework.
- **AI/LLM (OpenAI via )**: Prospektanalyse, E-Mail-Generierung, Glossar-Matching.
- **Google Analytics 4 (GA4)**: Webanalyse-Datenquelle.
</key_technical_concepts>
<code_architecture>

-   ****:
    -   **Importance**: Main frontend, dashboard UI, Kaltakquise-Logik, Analytics-Darstellung.
    -   **Changes**: Implementierte expand/collapse für Produktseiten; fügte UI für Info Pages und Beileger-Sektion hinzu; aktualisierte  zum Aufruf neuer APIs; verbesserte KPI-Darstellung für  (Nutzung von ); fixierte Navigations-Bug in Kaltakquise (Filter-Buttons); implementierte E-Mail-Inbox-Anzeige; passte Layout des Kaltakquise-Moduls an (kompaktere Aktionsbuttons, ); fügte Glossar-Tab im Marketing-Bereich hinzu.
-   ****:
    -   **Importance**: Zentrale Logik für GA4-Datenabfrage.
    -   **Changes**: Implementierte ,  und  Funktionen; behob einen Bug, bei dem  0 zurückgab (Workaround mit ); aktualisierte Timeseries-Funktion mit dieser Logik; korrigierte Filter für Kategorie- und Produktseiten. Wurde auch nach  kopiert, um Importpfadprobleme zu beheben.
-   ** (New)**:
    -   **Importance**: API-Endpunkt zum Abrufen von Daten für spezifische Info Pages.
    -   **Changes**: Neu erstellt, um  aus  aufzurufen.
-   ** (New)**:
    -   **Importance**: API-Endpunkt zum Abrufen von Daten für die Erfolg von Beileger-Sektion (QR-Code Traffic).
    -   **Changes**: Neu erstellt, um  aus  aufzurufen.
-   ****:
    -   **Importance**: Handles IMAP connection for email inbox.
    -   **Changes**: Keine direkten Codeänderungen, aber die Konfiguration in  wurde angepasst, um die Authentifizierung zu ermöglichen.
-   ****:
    -   **Importance**: Kernlogik für die Analyse von Prospekt-Websites.
    -   **Changes**: Erweiterte Analyse um Firmengröße und Haupttätigkeit; verbesserte Kontakt-Extraktion (E-Mail, Telefon); entfernte granularere Produktdetails; verbesserte Crawler-Logik und Glossar-Matching (Case-Insensitivität).
-   ****:
    -   **Importance**: Generierung und Versand von Kaltakquise-E-Mails.
    -   **Changes**: Reworked Email-Generierung für persönliche Ansprache, Erwähnung spezifischer Hersteller (z.B. Pferd), vereinfachte Produktlisten (ohne Körnungen); hinzugefügt BCC an ; hinzugefügt Reply-To Header.
-   ****:
    -   **Importance**: Generischer E-Mail-Client.
    -   **Changes**: Hinzugefügt BCC-Option, um Konsistenz zu gewährleisten.
-   ****:
    -   **Importance**: API für die Analyse von Cold Leads.
    -   **Changes**: Integrierte die  Logik.
-   ****:
    -   **Importance**: API für die E-Mail-Generierung.
    -   **Changes**: Integrierte die  Logik.
-   ** (New)**:
    -   **Importance**: Verwaltet die definierten Anwendungs-, Kategorie-, Material- und Maschinentypen-Listen für das Glossar.
    -   **Changes**: Neu erstellt, um die statischen Glossar-Daten zu speichern und Funktionen zum Abrufen bereitzustellen.
-   ** (New)**:
    -   **Importance**: API-Endpunkt für das Glossar-Frontend.
    -   **Changes**: Neu erstellt, um die Glossar-Daten bereitzustellen.
-   ** (New)**:
    -   **Importance**: Neue, verbesserte Version des Analyzers basierend auf dem detaillierten Briefing.
    -   **Changes**: Neu erstellt, um erweiterte Parsing-Logik, Kontaktpriorisierung und Glossar-Mapping zu implementieren.
-   ** (New)**:
    -   **Importance**: Neue, verbesserte Version des Emailers basierend auf dem detaillierten Briefing.
    -   **Changes**: Neu erstellt, um die neue E-Mail-Struktur (Anrede, Einstieg, Nutzenpunkte, Angebot, CTA, Signatur) und Betreffvarianten zu generieren.
-   ** (New)**:
    -   **Importance**: Initiale Datei für ein strukturiertes Crawling-System für DACH-Regionen.
    -   **Changes**: Neu erstellt, um die Grundlage für ein systematischeres Prospekt-Sourcing zu legen.
-   ****:
    -   **Importance**: Umgebungsvariablen für Datenbank- und E-Mail-Konfiguration.
    -   **Changes**: Bereinigt Duplikate und widersprüchliche SMTP/IMAP-Einstellungen; aktualisiert SMTP_FROM, SMTP_USER, SMTP_PASSWORD, IMAP_USER, IMAP_PASSWORD, REPLY_TO_EMAIL auf die neuen  und  Adressen.
</code_architecture>
<pending_tasks>
- Full implementation of Google Ads and LinkedIn integrations (Google Ads needs Standard Access).
- Implementation of Firebase (Firestore, Auth, Functions).
- Further UI refinement (KPI card compactness, table row height, sum row).
- Addressing persistent JTL data discrepancies for 03.11.2025 orders (if any remain after sales API fix).
- Implement charts for Traffic Sources and other tables in Analytics.
- Implement more robust manufacturer detection in Kaltakquise analyzer.
- Complete the structured DACH-Crawling system as discussed in the latest messages.
</pending_tasks>
<current_work>
Unmittelbar vor dieser Zusammenfassung begann der KI-Ingenieur mit der Implementierung eines **systematischen DACH-Crawling-Systems** für die Kaltakquise. Der Nutzer hatte festgestellt, dass die bestehende Google-Suche unstrukturiert ist und oft zu ungenauen Branchenzuordnungen führt, und suchte eine methodische Lösung für die Abdeckung von Deutschland, Österreich und der Schweiz (DACH).

Der KI-Ingenieur hat eine neue Service-Datei namens  erstellt. Dies ist der erste Schritt zur Entwicklung eines strukturierten Branchen-Verzeichnis-Crawling-Ansatzes, der die aktuellen Mängel der Prospektsuche beheben soll. Die Arbeit in dieser Datei hat gerade erst begonnen. Der Agent war dabei, eine finale Zusammenfassung des Lösungskonzepts für den DACH-Crawler zu erstellen, als die Anfrage für diese Gesamtübersicht kam.
</current_work>
<optional_next_step>
Weiterentwicklung und Implementierung des systematischen DACH-Crawling-Systems in .
</optional_next_step>
